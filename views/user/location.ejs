<% layout('../layout/boilerplate') -%>
<script>
    const mapToken = "<%=process.env.MAP_TOKEN%>";
</script>

<script src="https://api.mapbox.com/mapbox-gl-js/v2.16.0/mapbox-gl.js"></script>
<script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.min.js"></script>
<link href="https://api.mapbox.com/mapbox-gl-js/v2.16.0/mapbox-gl.css" rel="stylesheet" />
<link href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.css" rel="stylesheet" />


<div id="geocoder"></div>
<div id="map"></div>
<div class="continue justify-content-center align-items-center">
    <button class="btn btn-success add-btn" id="detect-location">Use My Current Location</button>
    <form id="address-form" method="POST" action="/order/<%= currUser._id %>/update-address">
        <input type="hidden" name="coordinates" id="center-coordinates">
        <button type="submit" class="btn btn-success">Continue</button>
    </form>   
    
    <div class="toggle">
    </div>
</div>
<script src="/js/map.js"></script>
  

<style>
    /* Ensure map has proper height */
#map {
    width: 100%;
    height: 400px;
    border: 1px solid #ddd;
    margin-bottom: 20px;
}

/* Style the geocoder */
#geocoder {
    margin-bottom: 10px;
}

/* Adjust layout spacing */
h2 {
    display: flex;
    justify-content: space-between;
    gap: 10px;
}

.continue {
    margin-top: 20px;
    display: flex;
    justify-content: space-between;
}

button {
    margin-right: 10px;
}

</style>

